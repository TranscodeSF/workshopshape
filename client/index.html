<head>
  <meta charset="utf-8">
  <title>Transcode Workshop</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style type="text/css">
    body {
      padding-top: 60px;
      padding-bottom: 40px;
    }
  </style>
</head>

<body>
  {{> navbar}}
  {{> content}}
</body>

<template name="navbar">
  <div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <button type="button" class="btn btn-navbar" data-toggle="collapse"
            data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="brand" href="#">Transcode Workshop</a>
        <div class="nav-collapse collapse">
          <ul class="nav">
            {{#if isAdmin}}
            <li class="{{editingActive}}"><a class="toggleEdit">Edit</a></li>
            {{/if}}
          </ul>
          <div class="pull-right">
          {{loginButtons}}
          </div>
        </div><!--/.nav-collapse -->
      </div>
    </div>
  </div>
</template>

<template name="content">
  <div class="container">
    {{#if loggedIn}}
    {{> loggedincontent}}
    {{else}}
    <h1>Welcome!</h1>
    <p>If you have a <a href="https://github.com">GitHub</a> account, please log in using the button at the top right of this page.</p>
    <p>If you don't have an account yet, please go to <a href="https://github.com">GitHub</a> now, and create one, and then log in.</p>
    {{/if}}
  </div>
</template>

<template name="loggedincontent">
  <div class="row">
    <div class="span3">
      {{> sidebar}}
    </div>
    <div class="span9">
      {{> worksheet}}
    </div>
  </div>
</template>

<template name="sidebar">
  <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">Worksheets</li>
      {{#each worksheets}}
      <li class="{{worksheetActive}}"><a class="selectWorksheet">{{name}}</a></li>
      {{/each}}
    </ul>
  </div><!--/.well -->
</template>

<template name="worksheet">
  {{#with selectedWorksheet}}
    <h1>{{name}}</h1>
    {{#each questions}}
      {{#with getQuestion this}}
        {{#if editing}}
          {{> editquestion}}
        {{else}}
          {{> question}}
        {{/if}}
      {{/with}}
    {{/each}}
  {{/with}}
</template>

<template name="question">
  <h3>{{name}}</h3>
  <p>{{text}}</p>
  <div class="row">
    <div class="span5 question-code">
      <textarea class="codearea">{{answerText}}</textarea>
    </div>
    <div class="span4 question-canvas">
      <canvas></canvas>
    </div>
  </div>
  <p>
    <button class="btn btn-success runButton">Run</button>
  </p>
  <div class="row">
    <div class="span9">
      <div class="well question-output">{{output}}</div>
      {{#if error}}
      <div class="welll question-error">{{error}}</div>
      {{/if}}
    </div>
  </div>
</template>

<template name="editquestion">
  <form class="form-horizontal">
    <legend>Edit question</legend>
    <div class="control-group">
      <label class="control-label">Title</label>
      <div class="controls questionName">
        <input class="input-xxlarge"
               type="text"
               placeholder="Enter a title..."
               {{#if name}}value="{{name}}"{{/if}}>
        </input>
      </div>
    </div>
    <div class="control-group">
      <label class="control-label">Description</label>
      <div class="controls questionText">
        <textarea class="input-xxlarge" rows="5">{{text}}</textarea>
      </div>
    </div>
    <div class="control-group">
      <label class="control-label">Starting code</label>
      <div class="controls questionInitialCode">
        <textarea class="input-xxlarge codearea" rows="5">{{initialCode}}</textarea>
      </div>
    </div>
    <div class="control-group">
      <label class="control-label">Test code</label>
      <div class="controls">
        <textarea class="input-xxlarge codearea" rows="5"></textarea>
      </div>
    </div>
    <div class="form-actions">
      <a class="btn btn-primary saveQuestion">Save</a>
    </div>
  </form>
</template>
